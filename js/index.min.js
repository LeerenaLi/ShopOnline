const createTimer=t=>{t.insertAdjacentHTML("beforeend",'\n        <p class="timer__title">До конца акции:</p>\n        <div class="timer__item timer__item_days">\n            <p class="timer__count timer__count_days"></p>\n            <p class="timer__units timer__units_days"></p>\n        </div>\n        <div class="timer__item timer__item_hours">\n            <p class="timer__count timer__count_hours"></p>\n            <p class="timer__units timer__units_hours"></p>\n        </div>\n        <div class="timer__item timer__item_minutes">\n            <p class="timer__count timer__count_minutes"></p>\n            <p class="timer__units timer__units_minutes"></p>\n        </div>\n    ')},timer=(t,e)=>{const n=document.querySelector(".end-action"),i=document.querySelector(".timer__count_days"),s=document.querySelector(".timer__count_hours"),r=document.querySelector(".timer__count_minutes"),_=document.querySelector(".timer__units_days"),m=document.querySelector(".timer__units_hours"),o=document.querySelector(".timer__units_minutes"),u=(t,e,n=[2,0,1,1,1,2])=>e[t%100>4&&t%100<20?2:n[t%10<5?t%10:5]],c=()=>{const a=(()=>{const e=new Date(new Date(t).getTime()+108e5)-Date.now();return{timeRemaining:e,minutes:Math.floor(e/1e3/60%60),hours:Math.floor(e/1e3/60/60%24),days:Math.floor(e/1e3/60/60/24)}})();i.textContent=a.days,s.textContent=a.hours,r.textContent=a.minutes,_.textContent=u(a.days,["день","дня","дней"]),m.textContent=u(a.hours,["час","часа","часов"]),o.textContent=u(a.minutes,["минута","минуты","минут"]);const d=setTimeout(c,1e3);a.timeRemaining<864e5&&e.classList.add("red"),a.timeRemaining<=0&&(clearTimeout(d),i.textContent="00",s.textContent="00",r.textContent="00",e.classList.add("delete"),n.classList.remove("delete"))};c()};{const t=t=>{const e=document.querySelector(t),n=e.getAttribute("data-timer-deadline");createTimer(e),timer(n,e)};window.timerInit=t}
const createElement=(a,e,{append:t,appends:n,parent:i,cb:r}={})=>{const s=document.createElement(a);return e&&Object.assign(s,e),t&&t instanceof HTMLElement&&s.append(t),n&&n.every((a=>a instanceof HTMLElement))&&s.append(...n),i&&i instanceof HTMLElement&&i.append(s),r&&"function"==typeof r&&r(s),s},API_URL="https://gorest.co.in/public/v1/posts",COUNT_PAGINATION=3,blogList=document.querySelector(".blog__list"),articleContainer=document.querySelector(".article__container"),wrapperPagination=document.querySelector(".pagination"),getData=async a=>{const e=new URL(a),t=await fetch(e);return await t.json()},getUrl=a=>{let e=window.location.pathname;const t=new URLSearchParams(e.search);for(const e in a)t.set(e,a[e]);return e+=`?${t.toString()}`,e},renderPagination=(a,e,t)=>{wrapperPagination.textContent="";const n=createElement("ul",{className:"pagination__list"},{parent:wrapperPagination}),i=a-Math.floor(t/2)>1,r=a+Math.floor(t/2)>=e;console.log("page: ",a),t>e&&(t=e);for(let s=0;s<t;s++){let l=s+1;i&&(l=r?e-t+s+1:a-Math.floor(t/2)+s),createElement("li",{className:"pagination__item"},{parent:n,append:createElement("a",{textContent:l,href:getUrl({page:l}),className:"pagination__link "+(l===a?"pagination__link_active":"")})})}e>t&&(createElement("a",{className:"pagination__arrow pagination__arrow_start\n                "+(i?"":"pagination__arrow_start-disabled"),href:getUrl({page:1}),tabIndex:i?"0":"-1",innerHTML:'\n                <svg width="29" height="19" viewbox="0 0 29 19" fill="none" xmlns="http://www.w3.org/2000/svg">\n                    <path d="M28.375 7.95833H6.52958L12.0487 2.42375L9.875 0.25L0.625 9.5L9.875 18.75L12.0487 16.5763L6.52958 11.0417H28.375V7.95833Z" fill="currentColor"/>\n                </svg>           \n            ',ariaLabel:"В начало"},{cb(a){wrapperPagination.prepend(a)}}),createElement("a",{className:"pagination__arrow pagination__arrow_end\n                "+(r?"pagination__arrow_end-disabled":""),href:getUrl({page:e}),tabIndex:r?"-1":"0",innerHTML:'\n                <svg width="29" height="19" viewbox="0 0 29 19" fill="none" xmlns="http://www.w3.org/2000/svg">\n                    <path d="M0.625 7.95833H22.4704L16.9513 2.42375L19.125 0.25L28.375 9.5L19.125 18.75L16.9513 16.5763L22.4704 11.0417H0.625V7.95833Z" fill="currentColor"/>\n                </svg>\n            ',ariaLabel:"В конец"},{parent:wrapperPagination}))},getAutor=async a=>{console.log("userID: ",a);const e=await fetch(`https://gorest.co.in/public-api/users/${a}`);return(await e.json()).data},createTemplate=async(a,e,t)=>{const n=await getAutor(t);console.log("dataAutor: ",n);const i=(r=1,s=13,Math.floor(Math.random()*(s-r))+r);var r,s;blogList.insertAdjacentHTML("beforeend",`\n        <li class="blog__item">\n            <img src="img/blog/${i}.jpg" class="blog__img">\n            <div class="blog__text">\n                <a href="article.html?id=${e}" id="${e}" class="blog__link">\n                    <div class="blog__descr">\n                        <h2 class="blog__title">${a.title}</h2>\n                        <p class="blog__body">${a.body}</p>\n                    </div>\n                </a>    \n                <div class="blog__scan">\n                    <p class="blog__count">Автор: \n                        <a href="#" class="blog__autor">${n.name}</a>\n                    </p>\n                </div>\n            </div>\n        </li>\n        \n    `)},getAtricle=async a=>{const e=await fetch(`https://gorest.co.in/public-api/posts/${a}`);return(await e.json()).data},createArticlePage=async(a,e,t)=>{const n=await getAutor(t);articleContainer.insertAdjacentHTML("beforeend",`\n        <div class="bread">\n            <a href="index.html" class="bread__link">Главная</a>\n                <img src="icons/blog/bread__right.svg" alt="arrow right" class="bread__img">\n            <a href="blog.html" class="bread__link">Блог</a>\n                <img src="icons/blog/bread__right.svg" alt="arrow right" class="bread__img">\n            <a href="article.html?id=${a}" class="bread__link">${e.title}</a>\n        </div>\n        <div class="article__wrapper">\n                <div class="article__text">\n                    <div class="article__title">${e.title}</div>\n                    <p class="article__body">${e.body}</p>\n                    \n                    <div class="article__footer">\n                        <div class="back">\n                            <img src="icons/blog/left.svg" alt="arrow back" class="back__img">\n                            <a href="blog.html" class="back__link">К списку статей</a>\n                        </div>\n                        \n                        <div class="autor">\n                            <p class="autor__name">${n.name}</p>\n                            <div class="autor__info">\n                                <p class="autor__status">Gender: ${n.gender}</p>\n                                <p class="autor__status">Status: ${n.status}</p>\n                            </div>\n                            <a href="mailto:${n.email}" class="autor__email">E-mail: ${n.email}</a>\n                        </div>\n                    </div>\n                </div>\n                <div class="article__adevertisting">\n                    <img src="img/blog/add.jpg" alt="adevertisting" class="article__img">\n                    <img src="img/blog/add2.jpg" alt="adevertisting" class="article__img">\n                </div>\n            </div>\n    `)},createArticleLink=()=>{blogList.addEventListener("click",(async a=>{a.preventDefault();const e=a.target.closest("a").id;window.location.href=`article.html?id=${e}`}))},renderArticlePage=async()=>{blogList&&blogList.addEventListener("click",(async a=>{a.preventDefault();const e=a.target.closest("a").id;window.location.href=`article.html?id=${e}`}));const a=new URLSearchParams(window.location.search).get("id"),e=await getAtricle(a),t=e.user_id;createArticlePage(a,e,t)},renderPages=async()=>{let a=1;a=new URL(document.location).searchParams.get("page"),a=Number(a);const e=await getData(`${API_URL}?page=${a}`),t=e.meta.pagination.pages,n=e.data;n&&n.forEach((a=>{const e=a.id,t=a.user_id;console.log("autorId: ",t),blogList&&createTemplate(a,e,t)})),t&&t>1&&renderPagination(a,t,3)},init=()=>{blogList&&renderPages(),articleContainer&&renderArticlePage()};blogList&&renderPages(),articleContainer&&renderArticlePage();
/*! js-cookie v3.0.5 | MIT */
!function(e,t){var n,o;"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self,n=e.Cookies,(o=e.Cookies=t()).noConflict=function(){return e.Cookies=n,o})}(this,(function(){"use strict";function e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)e[o]=n[o]}return e}var t=function t(n,o){function r(t,r,i){if("undefined"!=typeof document){"number"==typeof(i=e({},o,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),t=encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var c="";for(var u in i)i[u]&&(c+="; "+u,!0!==i[u]&&(c+="="+i[u].split(";")[0]));return document.cookie=t+"="+n.write(r,t)+c}}return Object.create({set:r,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var t=document.cookie?document.cookie.split("; "):[],o={},r=0;r<t.length;r++){var i=t[r].split("="),c=i.slice(1).join("=");try{var u=decodeURIComponent(i[0]);if(o[u]=n.read(c,u),e===u)break}catch(e){}}return e?o[e]:o}},remove:function(t,n){r(t,"",e({},n,{expires:-1}))},withAttributes:function(n){return t(this.converter,e({},this.attributes,n))},withConverter:function(n){return t(e({},this.converter,n),this.attributes)}},{attributes:{value:Object.freeze(o)},converter:{value:Object.freeze(n)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});return t}));
"use strict";var menuBtn=document.querySelector(".header__btn"),menu=document.querySelector(".navigation");menuBtn.addEventListener("click",(function(e){e.target;menuBtn.classList.toggle("header__btn_active"),menu.classList.toggle("navigation_active")}));